<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Teste de Toast + Transcri√ß√£o</title>
<style>
  :root { --bg:#0f172a; --card:#1e293b; --txt:#e5e7eb; --muted:#94a3b8; --ok:#22c55e; --warn:#f59e0b; }
  *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0f172a,#0b1220);color:var(--txt);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; padding:18px; display:flex; flex-direction:column; align-items:center; gap:16px}
  h1{margin:0;font-size:20px}
  .card{width:92%; max-width:720px; background:var(--card); border:1px solid rgba(255,255,255,.1); border-radius:12px; padding:14px}
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  button{appearance:none; border:0; padding:14px 16px; border-radius:10px; font-weight:800; cursor:pointer}
  .primary{background:#3b82f6; color:#fff}
  .start{background:var(--ok); color:#052e16}
  .stop{background:#ef4444; color:#fff}
  .muted{font-size:12px; color:var(--muted)}
  #box{height:200px; background:#0b1020; border:1px dashed rgba(255,255,255,.2); border-radius:10px; padding:10px; overflow-y:auto; white-space:pre-wrap; line-height:1.45}
  /* TOASTS */
  #toasts{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:10px; z-index:999999}
  @media (max-width:540px){ #toasts{right:50%; transform:translateX(50%);} }
  .toast{background:#111827; border:1px solid rgba(255,255,255,.12); border-left:6px solid #22c55e;
    color:#e5e7eb; padding:12px 14px; border-radius:10px; width:320px; max-width:92vw;
    opacity:0; transform:translateY(8px) scale(.98); animation:pop .2s ease-out forwards}
  .toast h4{margin:0 0 4px 0; font-size:14px} .toast p{margin:0; font-size:13px; color:#d1d5db}
  @keyframes pop{to{opacity:1; transform:translateY(0) scale(1)}}
</style>
</head>
<body>
  <h1>üîî Teste de Toast + üéôÔ∏è Transcri√ß√£o</h1>

  <div class="card">
    <div class="row" style="justify-content:space-between">
      <button id="btnTest" class="primary" style="flex:1; min-width:260px">TESTAR TOAST (deve aparecer abaixo √† direita)</button>
      <div class="muted">Build: v-test</div>
    </div>
    <p class="muted" style="margin:10px 0 0">Ao clicar no bot√£o acima, deve surgir uma notifica√ß√£o (toast) no canto inferior direito. Em telas estreitas, ela centraliza embaixo.</p>
  </div>

  <div class="card" style="margin-top:8px">
    <div class="row">
      <button id="btnStart" class="start">Iniciar transcri√ß√£o</button>
      <button id="btnStop"  class="stop">Parar</button>
      <span id="support" class="muted"></span>
    </div>
    <div id="box" style="margin-top:10px"></div>
    <p class="muted" style="margin-top:8px">Dica: a transcri√ß√£o funciona no Chrome (desktop/Android). iOS Safari n√£o suporta Web Speech API.</p>
  </div>

  <div id="toasts"></div>

<script>
  // === TOASTS ===
  const toasts = document.getElementById('toasts');
  function showToast(title, body){
    const el = document.createElement('div');
    el.className = 'toast';
    el.innerHTML = `<h4>${title}</h4><p>${body}</p>`;
    toasts.appendChild(el);
    setTimeout(()=>{ el.style.opacity=.0; el.style.transform='translateY(6px)';
      setTimeout(()=>el.remove(), 300); }, 4500);
  }
  document.getElementById('btnTest').onclick = () => {
    showToast('‚úÖ Toast OK', 'Se voc√™ est√° vendo isso, o componente de notifica√ß√£o est√° funcionando.');
  };

  // === TRANSCRI√á√ÉO (opcional) ===
  const box = document.getElementById('box');
  const support = document.getElementById('support');
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(SR){ support.textContent = 'Web Speech API: suportado'; }
  else  { support.textContent = 'Web Speech API: N√ÉO suportado (use Chrome desktop/Android)'; }

  let recognition = null, listening = false;
  function setupRec(){
    if(!SR) return null;
    const rec = new SR();
    rec.lang = 'pt-BR'; rec.continuous = true; rec.interimResults = true;
    rec.onstart = ()=>{ listening=true; showToast('üéôÔ∏è Transcri√ß√£o', 'Capturando √°udio‚Ä¶'); };
    rec.onend   = ()=>{ listening=false; showToast('üõë Transcri√ß√£o', 'Parado.'); };
    rec.onerror = (e)=>{ showToast('‚ö†Ô∏è Erro de transcri√ß√£o', String(e.error||'desconhecido')); };

    rec.onresult = (ev)=>{
      let parcial = '';
      for(let i=ev.resultIndex; i<ev.results.length; i++){
        const r = ev.results[i], t = (r[0] && r[0].transcript) ? r[0].transcript : '';
        if(r.isFinal){
          const cur = box.textContent; const sep = cur && !cur.endsWith('\n') ? '\n' : '';
          box.textContent = (cur||'') + sep + t.trim() + '\n';
        } else {
          parcial = t;
        }
      }
      if(parcial){
        const lines = box.textContent.split('\n');
        if(lines[lines.length-1].trim()==='') lines.pop();
        const base = lines.join('\n');
        box.textContent = (base ? base+'\n' : '') + parcial;
      }
      box.scrollTop = box.scrollHeight;
    };
    return rec;
  }
  document.getElementById('btnStart').onclick = ()=>{
    if(listening) return;
    if(!recognition) recognition = setupRec();
    if(recognition){ try{ recognition.start(); }catch{} }
  };
  document.getElementById('btnStop').onclick = ()=>{
    if(!listening || !recognition) return;
    try{ recognition.stop(); }catch{}
  };
</script>
</body>
</html>
